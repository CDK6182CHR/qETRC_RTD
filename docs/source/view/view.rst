
运行图设置的层次
^^^^^^^^^^^^^^^^^

qETRC中，运行图显示控制、列车类型设置都有不同层次的设置，依附于不同的数据载体。运行图显示设置有如下三个层次，按照使用优先级排列：

1. 运行图页面的显示设置。自V1.0.1版本起，各运行图页面可以有独立的显示设置。
2. 运行图文件的显示设置。不直接作用于运行图页面，而是作为新建运行图页面的默认设置。
3. 系统默认设置。是整个qETRC软件的默认设置，用于新建的运行图文件。保存在程序目录下的 ``config.json`` 文件中。如果该文件不存在或者无法正常读取，将使用系统内置（硬编码）的默认设置。

其中，只有第1个层次的设置直接作用于运行图铺画。qETRC提供了一些在不同层次之间应用/覆盖设置的功能选项，例如将运行图文件的显示设置应用于所有页面，将系统默认设置应用于当前运行图等。

列车类型管理系统有如下两个层次：

1. 运行图文件的类型管理系统。
2. 系统默认的类型管理系统。与显示设置相同，保存于程序目录下的 ``config.json`` 文件中。若该文件不存在或无法正常读取，则使用系统内置的硬编码的默认设置。

同样，只有第1个层次直接作用于运行图铺画。

.. _sec_transparent_config:

透明模式
~~~~~~~~~~

:起始版本: V1.4.0

透明模式是为了解决显示控制、类型设置层次过于复杂的问题而设计的。所谓透明，是指上述运行图显示设置的第1、2层次，以及列车类型管理系统的第1层次可以被当做“透明”的，即不发挥作用。
如果某一层次开启了透明模式，则该层次的设置在读取文件时将被忽略，而直接使用下一层次的设置。例如，若运行图文件的显示设置为透明，则读取该运行图文件时，其显示设置自动读取当前的系统默认设置。如果系统默认设置改变了，则该运行图的显示设置也跟随变化。
如果用户修改了处于透明状态的显示控制、类型设置并应用，则透明状态被解除，该层次的设置将维护自身独立的状态，并保存到运行图文件。下一次读取时，若其下一层次的默认设置改变，也不会跟着改变。

.. note::
    注意，透明状态下，自动应用下一层级的设置， **只发生在打开运行图文件时** 。若打开运行图文件后，再修改运行图文件的显示设置，即使运行图页面的显示设置为透明状态，也不会跟随修改；只会在下一次重新打开本运行图文件时与之同步。


在全局配置选项中，设置了透明模式的全局开关（默认开启）。如果关闭该选项，则以上逻辑不发挥作用，透明模式总是处于关闭状态。


运行图显示设置
^^^^^^^^^^^^^^^^

【运行图显示设置】窗口文档


运行线外观控制
^^^^^^^^^^^^^^^^

qETRC中，列车运行线外观的控制可以分为自动和手动两种模式。若采用自动模式，则列车运行线的外观由列车所属的类型的运行线外观给出，参见 :ref:`列车类型管理<sec_train_type>` 。若采用手动模式，则可以单独为每一列车指定列车运行线样式。

.. figure:: /_static/img/view/trainline-style.png
    :alt: 列车运行线外观设置-V1.7.3

如上图所示是列车运行线外观设置的位置，可以在工具栏 :guilabel:`列车编辑(7)` 上下文页面以及列车编辑停靠面板中编辑。当勾选 ``自动`` 时，使用列车所属类型的运行线外观设置，当前车次的运行线外观设置不可用。当不勾选 ``自动`` 时，可分别设置运行线宽度、线形及颜色。


列车显示与筛选
^^^^^^^^^^^^^^^^

qETRC提供了多种控制列车显示与否的方案，主要包括：
- 按照列车的种类或区段行别（上/下行）筛选显示车次；
- 使用通用列车筛选器筛选显示的车次；
- 逐个车次设置是否显示。

以下逐一简要介绍。

