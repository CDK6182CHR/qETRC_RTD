线路数据调整
~~~~~~~~~~~~~

线路反排
^^^^^^^^^

:起始版本: V1.0.0
:最新修订: V1.2.4
:工具栏: :guilabel:`线路工具(8)` 上下文页面 | :guilabel:`线路反排`
:pyETRC对应功能: 线路反排

在说明反排运行图的功能前，有必要再强调一下本系统的上下行逻辑。在本系统中，总是以下行为主方向，即要求线路信息的车站排列顺序、里程递增方向、对里程递增方向（虽然对里程的意义是上行线里程，但仍然要求按下行方向递增）都是下行方向。参见 :ref:`线路基本概念<sec_rail_basic>` 。

在实际的操作中，有时候可能确实需要反排运行图，例如需要将当前线路以一段的身份加入到另一运行图中，或者确实排反了。此时可以使用本功能。

此功能完成的操作有：

* 将线路信息中的车站反序排列，并以终点里程为0点、反向地重新计算里程和对里程数据。
* 将对里程与里程数据交换。如果本来没有对里程数据，则新的里程数据就是原来的里程数据。
* 将所有车站的单向站性质取反。就是说，上行通过站变为下行通过站，反之亦然。

在V1.2.4版本中，修正了一些由本功能导致的错误。


.. note::
    与pyETRC不同，由于qETRC是多线路的，原则上和概念上列车并不与某一特定线路绑定，因此线路反排操作 **不会** 交换列车的上下行车次。

.. note::
    对于原来缺失对里程数据的站，反排后对里程和里程数据都是原来的里程数据。也就是说，连续两次反排得到的效果并不是原始运行图，而是可能多了一些对里程数据。

.. warning::
    再次提醒，系统上的行别和线路实际行别不同会导致一些反直觉的情况。因此，尽量让系统上的行别和实际线路行别保持一致。

线路拼接
^^^^^^^^^

全局站名修改
^^^^^^^^^^^^^

合并标尺
^^^^^^^^^

