.. _sec_mod_timetable:

列车时刻表调整
~~~~~~~~~~~~~~~

在qETRC通常处理的运行图规模上，数据量最大的就是列车时刻表数据。如果以文本形式打开 ``pyetgr`` 文件并比较各部分的内容多少，就可以很直观地确认这一点。但我们指出，列车在各站的时刻数据之间是存在强耦合的。举例来说，如果延长列车在某车站的停车时长，则其后续车站的时刻很可能需要做相应的延后。利用这些耦合关系，在对时刻之间的关系做一定的假定之后，就可以减少大量的重复操作。

区间运行线平移
^^^^^^^^^^^^^^^

此功能将列车时刻表中某一段（或整个时刻表）提前或者推迟一段时间。此功能通常用于列车运行线的整体平移，或者调整一个站的停站时刻后，将后序（前序）所有车站时刻相应调整一定时间，以保持区间运行速度基本不变。此功能位于：

.. csv-table::

    运行图页面 , 右键菜单 | :guilabel:`时刻平移`
    工具栏上下文菜单 , :guilabel:`列车编辑(7)` | :guilabel:`时刻平移`


.. figure:: /_static/img/modify/modify-timetable.png
    :alt: 时刻平移

在表格中选择要调整的车站范围，设置调整方向和时长，然后点击 :guilabel:`确定` 执行操作。
其中 ``边界条件`` 选项指出调整的范围是否要包含首站的到达时刻和末站的出发时刻。这两个选项一般对于调整部分时刻表的情况有用。举例来说，如果调整某站的停车时长并修改后续时刻表，则该站的到达时刻不需要调整，可取消勾选 ``首站到达时刻`` 。

此功能是pyETRC中最早实现的微调功能之一。qETRC中其功能基本不变，但重新设计了界面。


时刻表修正
^^^^^^^^^^^^



